- # 1.前言

  今天看到设置调度器的方法``sched_setscheduler``,是经由Java层调用C++层的系统调用,实现对进程设置所属调度器的问题.

  其中我就在思考几个问题:

  - 进程在执行系统调用需要陷入内核态,那么在(systrace)CPU是如何表现的?
  - 系统调用是会将所属进程从用户空间转换为内核空间,那么在内核空间中是否可以使用系统调用?

  下面我会讲述一下,系统调用和内核方法的区别.

  # 2.系统调用和内核方法

  ### 2.1 定义

  **系统调用（System Call**）:系统调用是**应用程序与操作系统之间的界面**，允许应用程序请求内核执行某些特权操作，例如文件操作、进程管理等。它们是用户空间和内核空间之间的一种接口。

  **内核方法（Kernel API）**:内核方法是操作系统内核提供的一组函数或例程，用于执行特定的任务。这**些函数可以被系统调用调用，也可以被其他内核模块或内核组件直接使用。**

  ### 2.2 区别

  系统调用是一种软中断，应用程序通过特殊的指令（例如int 0x80或syscall指令）切换到内核模式，从而触发系统调用。这些调用由操作系统提供，并对用户空间可见。

  内核方法是在内核空间中实现的，而系统调用是用户空间和内核空间之间的接口。内核方法通常不直接被应用程序调用，而是通过系统自身调用或者调用封装后由用户空间的应用程序调用。

  ### 2.3 使用场景

  系统调用包括打开文件、关闭文件、读写文件、创建进程、等待进程等,主要是作为用户和系统之间的接口

  内核方法被操作系统内核用于实现系统调用，同时也可以被其他内核模块或组件使用。

  例如，一个文件系统模块可以使用内核提供的文件管理方法来执行文件操作，而这些方法最终可能会被系统调用封装以供用户空间应用程序使用。

  ### 2.4 调用开销

  由于系统调用涉及用户空间到内核空间的切换，通常具有较大的开销，而内核方法在内核空间中执行，开销较小。

  ### 2.5 象形笔记

  我们可以理解为用户层(上层代码)为一个产品经理,内核层(操作系统)是一个兢兢业业的程序员,产品经理通过Jira(系统调用)向程序员下发需求,程序员根据自己的方式(内核方法)完成具体的Jira,更新在Jira单上并更新Jira状态.